<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brutal Pusher - Stop Procrastinating!</title>
    <meta name="description" content="A brutal but humorous anti-procrastination tool">
    <meta name="theme-color" content="#dc2626">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <style>
        .brutal-button {
            @apply bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg 
                   transform hover:scale-105 transition-all duration-200 shadow-lg;
        }
        
        .brutal-card {
            @apply bg-white rounded-xl shadow-lg border-2 border-orange-500 p-6;
        }
        
        .brutal-text {
            @apply text-red-600 font-bold text-lg;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .pulse-brutal {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #fef2f2 0%, #fed7aa 100%);
        }
        
        .step-item {
            @apply flex items-start gap-3 p-3 bg-orange-50 rounded-lg cursor-pointer transition-colors;
        }
        
        .step-item.completed {
            @apply bg-green-50 border-2 border-green-200;
        }
        
        .step-item:hover {
            @apply bg-orange-100;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-red-600 mb-2">
                üíÄ Brutal Pusher üíÄ
            </h1>
            <p class="text-gray-600">Stop procrastinating, you lazy potato! ü•î</p>
        </header>

        <!-- Main Content -->
        <main class="max-w-2xl mx-auto">
            <!-- Step 1: Task Input -->
            <div id="taskStep" class="brutal-card">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-white text-2xl">üéØ</span>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">
                        What do you want to accomplish?
                    </h2>
                    <p class="text-gray-600">
                        Tell me what you're procrastinating on, you magnificent slacker! üò§
                    </p>
                </div>

                <form id="taskForm" class="space-y-4">
                    <div>
                        <textarea
                            id="taskInput"
                            placeholder="I want to... (be specific, you lazy human!)"
                            class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-red-600 focus:outline-none resize-none"
                            rows="4"
                            required
                        ></textarea>
                    </div>
                    
                    <button
                        type="submit"
                        class="brutal-button w-full flex items-center justify-center gap-2"
                    >
                        ‚ö° Break it down, you procrastinator!
                    </button>
                </form>
            </div>

            <!-- Step 2: Excuse Input -->
            <div id="excuseStep" class="brutal-card hidden">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-white text-2xl">‚ùå</span>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">
                        What's your excuse today?
                    </h2>
                    <p class="text-gray-600">
                        Come on, tell me why you're being a lazy potato! ü•î
                    </p>
                </div>

                <div class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="excuseGrid">
                        <!-- Excuses will be populated by JavaScript -->
                    </div>

                    <div class="border-t pt-4">
                        <form id="customExcuseForm" class="space-y-3">
                            <input
                                type="text"
                                id="customExcuseInput"
                                placeholder="Or type your own pathetic excuse..."
                                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none"
                            />
                            <button
                                type="submit"
                                class="brutal-button w-full flex items-center justify-center gap-2"
                            >
                                ‚ûï Submit your lame excuse!
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Step 3: Brutal Motivation -->
            <div id="motivationStep" class="space-y-6 hidden">
                <div class="brutal-card">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl">üî•</span>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">
                            Your Brutal Motivation
                        </h2>
                    </div>
                    
                    <div id="motivationText" class="bg-red-50 border-2 border-red-600 rounded-lg p-4 mb-4">
                        <p class="text-lg font-semibold text-red-600 leading-relaxed">
                            Generating your brutal motivation...
                        </p>
                    </div>

                    <button
                        id="startWorkingBtn"
                        class="brutal-button w-full flex items-center justify-center gap-2"
                    >
                        ‚è∞ Start working, you lazy human!
                    </button>
                </div>

                <div class="brutal-card">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="text-orange-500">‚úÖ</span>
                        Your Action Plan
                    </h3>
                    
                    <div id="breakdownList" class="space-y-3">
                        <!-- Steps will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Step 4: Progress Tracker -->
            <div id="progressStep" class="space-y-6 hidden">
                <div class="brutal-card">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-white text-2xl">üèÜ</span>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">
                            Progress Tracker
                        </h2>
                        <p class="text-gray-600">Don't stop now, you're doing great! üí™</p>
                    </div>

                    <div class="space-y-4">
                        <div class="text-center">
                            <div id="timer" class="text-3xl font-bold text-red-600 mb-2">
                                00:00:00
                            </div>
                            <p class="text-gray-600">Time spent working</p>
                        </div>

                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>Progress</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    id="progressBar"
                                    class="bg-red-600 h-2 rounded-full transition-all duration-300"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button
                                id="pauseBtn"
                                class="flex-1 brutal-button"
                            >
                                ‚è∏Ô∏è Pause
                            </button>
                            <button
                                id="restartBtn"
                                class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                            >
                                üîÑ New Task
                            </button>
                        </div>
                    </div>
                </div>

                <div class="brutal-card">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Your Steps</h3>
                    <div id="progressSteps" class="space-y-3">
                        <!-- Progress steps will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // Global state
        let currentStep = 'task';
        let taskData = {
            task: '',
            excuse: '',
            breakdown: [],
            motivation: ''
        };
        let timer = null;
        let timeElapsed = 0;
        let isTimerRunning = true;
        let completedSteps = [];

        // Common excuses
        const commonExcuses = [
            "I'm too tired",
            "I'll do it tomorrow",
            "I don't know where to start",
            "It's too hard",
            "I'm not in the mood",
            "I'm too busy",
            "I need to check my phone first",
            "I'll do it later"
        ];

        // Debug function
        function debug(message) {
            console.log('üîç Debug:', message);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            debug('App initialized');
            populateExcuses();
            setupEventListeners();
            debug('Setup complete');
        });

        function populateExcuses() {
            debug('Populating excuses');
            const excuseGrid = document.getElementById('excuseGrid');
            if (!excuseGrid) {
                console.error('‚ùå excuseGrid not found!');
                return;
            }
            
            excuseGrid.innerHTML = ''; // Clear existing content
            
            commonExcuses.forEach(excuse => {
                const button = document.createElement('button');
                button.className = 'p-3 text-left border-2 border-gray-200 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-colors';
                button.textContent = excuse;
                button.onclick = () => {
                    debug('Excuse selected: ' + excuse);
                    selectExcuse(excuse);
                };
                excuseGrid.appendChild(button);
            });
            debug('Excuses populated: ' + commonExcuses.length);
        }

        function setupEventListeners() {
            debug('Setting up event listeners');
            
            // Task form
            const taskForm = document.getElementById('taskForm');
            if (taskForm) {
                taskForm.addEventListener('submit', function(e) {
                    debug('Task form submitted');
                    handleTaskSubmit(e);
                });
            } else {
                console.error('‚ùå taskForm not found!');
            }
            
            // Custom excuse form
            const customExcuseForm = document.getElementById('customExcuseForm');
            if (customExcuseForm) {
                customExcuseForm.addEventListener('submit', function(e) {
                    debug('Custom excuse form submitted');
                    handleCustomExcuse(e);
                });
            } else {
                console.error('‚ùå customExcuseForm not found!');
            }
            
            // Start working button
            const startWorkingBtn = document.getElementById('startWorkingBtn');
            if (startWorkingBtn) {
                startWorkingBtn.addEventListener('click', function() {
                    debug('Start working button clicked');
                    startProgress();
                });
            } else {
                console.error('‚ùå startWorkingBtn not found!');
            }
            
            // Progress controls
            const pauseBtn = document.getElementById('pauseBtn');
            if (pauseBtn) {
                pauseBtn.addEventListener('click', function() {
                    debug('Pause button clicked');
                    toggleTimer();
                });
            } else {
                console.error('‚ùå pauseBtn not found!');
            }
            
            const restartBtn = document.getElementById('restartBtn');
            if (restartBtn) {
                restartBtn.addEventListener('click', function() {
                    debug('Restart button clicked');
                    restartApp();
                });
            } else {
                console.error('‚ùå restartBtn not found!');
            }
            
            debug('Event listeners setup complete');
        }

        function handleTaskSubmit(e) {
            e.preventDefault();
            debug('Handling task submit');
            
            const taskInput = document.getElementById('taskInput');
            if (!taskInput) {
                console.error('‚ùå taskInput not found!');
                return;
            }
            
            const task = taskInput.value.trim();
            debug('Task entered: ' + task);
            
            if (task) {
                taskData.task = task;
                debug('Moving to excuse step');
                showStep('excuse');
            } else {
                debug('No task entered');
                alert('Come on, you lazy potato! Enter something! ü•î');
            }
        }

        function selectExcuse(excuse) {
            debug('Excuse selected: ' + excuse);
            taskData.excuse = excuse;
            generateMotivation();
        }

        function handleCustomExcuse(e) {
            e.preventDefault();
            debug('Handling custom excuse');
            
            const customExcuseInput = document.getElementById('customExcuseInput');
            if (!customExcuseInput) {
                console.error('‚ùå customExcuseInput not found!');
                return;
            }
            
            const excuse = customExcuseInput.value.trim();
            debug('Custom excuse entered: ' + excuse);
            
            if (excuse) {
                taskData.excuse = excuse;
                generateMotivation();
            } else {
                debug('No custom excuse entered');
                alert('Really? You can\'t even come up with a good excuse? üòÇ');
            }
        }

        function generateMotivation() {
            debug('Generating motivation');
            debug('Task: ' + taskData.task);
            debug('Excuse: ' + taskData.excuse);
            
            // Generate brutal motivation based on task and excuse
            const motivations = [
                `Listen here, you magnificent procrastinator! "${taskData.excuse}"? That's the lamest excuse I've ever heard! Your ${taskData.task} isn't going to do itself, you lazy potato! ü•î`,
                `Oh, you're "${taskData.excuse}"? Well, your goals don't care about your feelings! Stop being a professional excuse maker and start being a goal achiever! üíÄ`,
                `"${taskData.excuse}"? Seriously? That's what you're going with? Your future self is already disappointed in you! Time to stop being a couch potato and start being a success potato! üöÄ`,
                `Excuse me, but "${taskData.excuse}" is not a valid reason to avoid ${taskData.task}! Your procrastination skills are impressive, but your achievement skills are non-existent! Time to change that! ‚ö°`
            ];
            
            taskData.motivation = motivations[Math.floor(Math.random() * motivations.length)];
            debug('Motivation generated: ' + taskData.motivation);
            
            // Generate task breakdown
            taskData.breakdown = generateBreakdown(taskData.task);
            debug('Breakdown generated: ' + taskData.breakdown.length + ' steps');
            
            showStep('motivation');
            displayMotivation();
            displayBreakdown();
        }

        function generateBreakdown(task) {
            debug('Generating breakdown for: ' + task);
            
            const breakdowns = {
                'study': ['Clear your desk and remove distractions', 'Open your textbook and read one chapter', 'Take notes on key points', 'Review and summarize what you learned'],
                'work': ['Check your email and prioritize tasks', 'Start with the most important task', 'Take short breaks every 25 minutes', 'Review your progress and adjust'],
                'exercise': ['Put on your workout clothes', 'Do a 5-minute warm-up', 'Start with 10 minutes of cardio', 'Add strength training exercises'],
                'clean': ['Pick up trash and put it in the bin', 'Put away items that are out of place', 'Wipe down surfaces with a cloth', 'Vacuum or sweep the floor'],
                'write': ['Open a blank document', 'Write down your main ideas', 'Start with the first paragraph', 'Keep writing without editing']
            };
            
            // Try to match task with predefined breakdowns
            for (let key in breakdowns) {
                if (task.toLowerCase().includes(key)) {
                    debug('Found matching breakdown for: ' + key);
                    return breakdowns[key];
                }
            }
            
            // Default breakdown
            debug('Using default breakdown');
            return [
                'Break down your task into smaller parts',
                'Start with the easiest step first',
                'Set a timer for 25 minutes and focus',
                'Take a short break and continue',
                'Review your progress and celebrate small wins'
            ];
        }

        function displayMotivation() {
            debug('Displaying motivation');
            const motivationText = document.getElementById('motivationText');
            if (!motivationText) {
                console.error('‚ùå motivationText not found!');
                return;
            }
            
            motivationText.innerHTML = `<p class="text-lg font-semibold text-red-600 leading-relaxed">${taskData.motivation}</p>`;
            debug('Motivation displayed');
        }

        function displayBreakdown() {
            debug('Displaying breakdown');
            const breakdownList = document.getElementById('breakdownList');
            if (!breakdownList) {
                console.error('‚ùå breakdownList not found!');
                return;
            }
            
            breakdownList.innerHTML = '';
            
            taskData.breakdown.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'flex items-start gap-3 p-3 bg-orange-50 rounded-lg';
                stepDiv.innerHTML = `
                    <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">
                        ${index + 1}
                    </span>
                    <p class="text-gray-700">${step}</p>
                `;
                breakdownList.appendChild(stepDiv);
            });
            debug('Breakdown displayed: ' + taskData.breakdown.length + ' steps');
        }

        function startProgress() {
            debug('Starting progress');
            showStep('progress');
            startTimer();
            displayProgressSteps();
        }

        function startTimer() {
            debug('Starting timer');
            timer = setInterval(() => {
                if (isTimerRunning) {
                    timeElapsed++;
                    updateTimer();
                }
            }, 1000);
        }

        function updateTimer() {
            const hours = Math.floor(timeElapsed / 3600);
            const minutes = Math.floor((timeElapsed % 3600) / 60);
            const seconds = timeElapsed % 60;
            
            const timerElement = document.getElementById('timer');
            if (timerElement) {
                timerElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        function toggleTimer() {
            isTimerRunning = !isTimerRunning;
            const pauseBtn = document.getElementById('pauseBtn');
            if (pauseBtn) {
                pauseBtn.innerHTML = isTimerRunning ? '‚è∏Ô∏è Pause' : '‚ñ∂Ô∏è Resume';
            }
            debug('Timer toggled: ' + (isTimerRunning ? 'running' : 'paused'));
        }

        function displayProgressSteps() {
            debug('Displaying progress steps');
            const progressSteps = document.getElementById('progressSteps');
            if (!progressSteps) {
                console.error('‚ùå progressSteps not found!');
                return;
            }
            
            progressSteps.innerHTML = '';
            
            taskData.breakdown.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'step-item';
                stepDiv.onclick = () => {
                    debug('Step clicked: ' + index);
                    toggleStep(index);
                };
                stepDiv.innerHTML = `
                    <span class="text-gray-400 text-xl">‚úÖ</span>
                    <span>${step}</span>
                `;
                progressSteps.appendChild(stepDiv);
            });
            debug('Progress steps displayed');
        }

        function toggleStep(index) {
            debug('Toggling step: ' + index);
            const stepItems = document.querySelectorAll('.step-item');
            const stepItem = stepItems[index];
            
            if (completedSteps.includes(index)) {
                completedSteps = completedSteps.filter(i => i !== index);
                stepItem.classList.remove('completed');
                stepItem.querySelector('span').className = 'text-gray-400 text-xl';
                debug('Step uncompleted: ' + index);
            } else {
                completedSteps.push(index);
                stepItem.classList.add('completed');
                stepItem.querySelector('span').className = 'text-green-600 text-xl';
                debug('Step completed: ' + index);
            }
            
            updateProgress();
        }

        function updateProgress() {
            const progress = taskData.breakdown.length > 0 ? (completedSteps.length / taskData.breakdown.length) * 100 : 0;
            
            const progressPercent = document.getElementById('progressPercent');
            if (progressPercent) {
                progressPercent.textContent = `${Math.round(progress)}%`;
            }
            
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
            
            debug('Progress updated: ' + Math.round(progress) + '%');
        }

        function restartApp() {
            debug('Restarting app');
            if (timer) {
                clearInterval(timer);
            }
            
            // Reset state
            currentStep = 'task';
            taskData = { task: '', excuse: '', breakdown: [], motivation: '' };
            timeElapsed = 0;
            isTimerRunning = true;
            completedSteps = [];
            
            // Reset UI
            const taskInput = document.getElementById('taskInput');
            if (taskInput) taskInput.value = '';
            
            const customExcuseInput = document.getElementById('customExcuseInput');
            if (customExcuseInput) customExcuseInput.value = '';
            
            const timerElement = document.getElementById('timer');
            if (timerElement) timerElement.textContent = '00:00:00';
            
            const progressPercent = document.getElementById('progressPercent');
            if (progressPercent) progressPercent.textContent = '0%';
            
            const progressBar = document.getElementById('progressBar');
            if (progressBar) progressBar.style.width = '0%';
            
            showStep('task');
            debug('App restarted');
        }

        function showStep(step) {
            debug('Showing step: ' + step);
            
            // Hide all steps
            const steps = ['task', 'excuse', 'motivation', 'progress'];
            steps.forEach(stepName => {
                const stepElement = document.getElementById(stepName + 'Step');
                if (stepElement) {
                    stepElement.classList.add('hidden');
                }
            });
            
            // Show current step
            const currentStepElement = document.getElementById(step + 'Step');
            if (currentStepElement) {
                currentStepElement.classList.remove('hidden');
                currentStep = step;
                debug('Step shown: ' + step);
            } else {
                console.error('‚ùå Step element not found: ' + step + 'Step');
            }
        }

        // Add some helpful console messages
        console.log('üíÄ Brutal Pusher loaded!');
        console.log('üîç Open browser console (F12) to see debug messages');
        console.log('üì± This is a PWA - you can install it on your phone!');
    </script>
</body>
</html>
